<% breadcrumb :mypage %>
<h1 class="text-2xl font-bold text-left p-6"><%= t('.title') %></h1>
<div class="md:justify-self-start">
  <div class="max-w-3xl mx-auto px-4">

    <%= turbo_frame_tag current_user do %>
      <%= render "profile" %>
    <% end %>
  </div>
</div>

<!-- name of each tab group should be unique -->
<div class="tabs tabs-lift mt-3 p-4">
  <%= radio_button_tag 'my_tabs_3', 'user_questions', @current_tab == 'user_questions',
                     class: 'tab',
                     aria: { label: t('.user_questions') } %>
  <div class="tab-content bg-base-100 border-base-300 p-6">
    <div class="alert alert-info mb-4">
      <span>※ お気に入りボタンを押すと、現在のタブから移動する場合があります。（今後のアップデートで改善予定です。）</span>
    </div>
    <%= render 'user_questions' %>
  </div>

  <%= radio_button_tag 'my_tabs_3', 'user_lists', @current_tab == 'user_lists',
                     class: 'tab',
                     aria: { label: t('.user_lists') } %>
  <div class="tab-content bg-base-100 border-base-300 p-6" data-controller="list-selector">
    <div class="mb-4">
      <label for="list_id" class="block text-sm font-medium mb-2">リストを選択</label>
      <%= select_tag :list_id,
                     options_for_select(@lists.map { |list| [list.name, list.id, { "data-is-favorite" => list.is_favorite }] }, @list.id),
                     class: "select select-bordered w-full max-w-xs",
                     id: "list_id",
                     data: {
                       list_selector_target: "select",
                       action: "change->list-selector#changeList"
                     } %>
    </div>
    <%= link_to "リスト一覧", lists_path, class: "link link-primary mb-4 inline-block mr-4" %>
    <%= link_to "リスト編集", edit_list_path(@list),
                class: "link link-primary mb-4 inline-block mr-4 #{'!hidden' if @list.is_favorite}",
                data: { list_selector_target: "editLink" } %>
    <%= link_to "リスト作成", new_list_path, class: "link link-primary mb-4 inline-block" %>

    <div class="alert alert-info mb-4">
      <span>※ お気に入りボタンを押すと、現在のタブから移動する場合があります。（今後のアップデートで改善予定です。）</span>
    </div>

    <%= turbo_frame_tag "list_questions" do %>
      <%= render partial: "users/list_questions", locals: { list_questions: @list_questions } %>
    <% end %>
  </div>

  <%= radio_button_tag 'my_tabs_3', 'game_records', @current_tab == 'game_records',
                     class: 'tab',
                     aria: { label: t('.game_records') } %>
  <div class="tab-content bg-base-100 border-base-300 p-6">
    <ul class="list bg-base-100 rounded-box shadow-md">
        <!--%= render 'game_records/game_records' %-->
        <% if @game_records.present? %>
          <div class="alert alert-info mb-4">
            <span>※ お気に入りボタンを押すと、現在のタブから移動する場合があります。（今後のアップデートで改善予定です。）</span>
          </div>
          <%= paginate @game_records, param_name: :game_records_page, params: { tab: 'game_records' } %>
            <%= render 'game_records/game_record' %>
          <div class="p-6">
            <%= paginate @game_records, param_name: :game_records_page, params: { tab: 'game_records' } %>
          </div>
        <% else %>
          <div class="m-8">履歴がありません</div>
        <% end %>
    </ul>
  </div>
</div>
